{% extends "base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'emt/css/iqac_view_report.css' %}">
<link rel="stylesheet" href="{% static 'emt/css/report_styles.css' %}">

<div class="page-container">
    <!-- Header Section -->
    <div class="page-header">
        <div class="header-content">
            <div class="header-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="#2A4B8D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <polyline points="14,2 14,8 20,8" stroke="#2A4B8D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="header-text">
                <h1 class="page-title">Generated Reports</h1>
                <p class="page-subtitle">View Generated Reports</p>
            </div>
        </div>
        
        <!-- Navigation Breadcrumb -->
        <div class="breadcrumb">
            <a href="{% url 'admin_reports' %}" class="breadcrumb-link">‚Üê Back to All Reports</a>
        </div>
    </div>

    <!-- Report Card -->
    <div class="report-grid">
        <div class="report-card">
            <!-- Category Badge -->
            <div class="category-badge">
                <span class="badge-text">Generated Event Report</span>
            </div>
            
            <!-- Report Content -->
            <div class="report-content-wrapper">
                <div class="report-title">
                    <h2>{{ report.proposal.event_title|default:"Untitled Event" }}</h2>
                </div>

                <div class="report-meta-grid">
                    <div class="meta-row">
                        <span class="meta-label">Organization:</span>
                        <span class="meta-value">{{ report.proposal.organization|default:"N/A" }}</span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-label">Event Date:</span>
                        <span class="meta-value">
                            {% if report.proposal.event_start_date %}
                                {{ report.proposal.event_start_date|date:"M j, Y" }}
                                {% if report.proposal.event_end_date and report.proposal.event_end_date != report.proposal.event_start_date %}
                                    - {{ report.proposal.event_end_date|date:"M j, Y" }}
                                {% endif %}
                            {% elif report.proposal.event_datetime %}
                                {{ report.proposal.event_datetime|date:"M j, Y" }}
                            {% else %}
                                N/A
                            {% endif %}
                        </span>
                    </div>
                    <div class="meta-row">
                        <span class="meta-label">Report Generated:</span>
                        <span class="meta-value">{{ report.created_at|date:"M j, Y g:i A" }}</span>
                    </div>
                </div>

                <!-- Report Content Preview -->
                <div class="report-preview">
                    {% if report.ai_generated_report %}
                        <div class="content-preview">
                            {{ report.ai_generated_report|linebreaks }}
                        </div>
                    {% elif report.summary %}
                        <div class="content-preview">
                            {{ report.summary|linebreaks }}
                        </div>
                    {% else %}
                        <div class="no-content">
                            <p>No detailed report content is available.</p>
                        </div>
                    {% endif %}
                </div>

                <!-- Action Buttons -->
                <div class="report-actions">
                    <a href="{% url 'emt:download_pdf' report.proposal.id %}" class="action-btn primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="7,10 12,15 17,10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Download PDF
                    </a>
                    <a href="{% url 'emt:download_word' report.proposal.id %}" class="action-btn secondary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="7,10 12,15 17,10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Download Word
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}