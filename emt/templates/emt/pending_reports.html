{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'emt/css/iqac_pending_reports.css' %}">

<div class="iqac-dashboard-bg">
  <div class="iqac-dashboard-container">
    <!-- Header Section -->
    <div class="iqac-page-header">
      <div class="iqac-header-content">
        <div class="iqac-header-icon">
          <span class="iqac-section-emoji">ðŸ“‘</span>
        </div>
        <div class="iqac-header-text">
          <h1 class="iqac-page-title">IQAC Reports</h1>
          <p class="iqac-page-subtitle">Proposals Pending Report Generation</p>
        </div>
      </div>
    </div>

    <!-- Table Section -->
    <div class="iqac-table-container">
      {% if proposals %}
        <div class="iqac-table-wrapper">
          <table class="iqac-reports-table">
            <thead>
              <tr>
                <th class="iqac-th-icon"></th>
                <th class="iqac-th-title">Event Title</th>
                <th class="iqac-th-status">Status</th>
                <th class="iqac-th-actions">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for proposal in proposals %}
                <tr class="iqac-table-row">
                  <td class="iqac-td-icon">
                    <div class="iqac-doc-icon">
                      <svg width="32" height="40" viewBox="0 0 32 40" fill="none">
                        <rect width="32" height="40" rx="7" fill="#2A4B8D" fill-opacity="0.12"/>
                        <rect x="5" y="8" width="22" height="24" rx="3" fill="#2A4B8D" />
                        <rect x="8.5" y="13.5" width="15" height="2" rx="1" fill="#fff"/>
                        <rect x="8.5" y="18.5" width="11" height="2" rx="1" fill="#fff"/>
                      </svg>
                    </div>
                  </td>
                  <td class="iqac-td-title">
                    <div class="iqac-event-info">
                      <div class="iqac-event-title">{{ proposal.event_title|default:"(Untitled Event)" }}</div>
                    </div>
                  </td>
                  <td class="iqac-td-status">
                    <span class="iqac-status-badge">Submitted by you</span>
                  </td>
                  <td class="iqac-td-actions">
                    <a href="{% url 'emt:submit_event_report' proposal.id %}" class="iqac-generate-btn">Generate Report</a>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <div class="iqac-empty-state">
          <div class="iqac-empty-icon">ðŸŽ‰</div>
          <div class="iqac-empty-msg">No pending proposals.<br>All your reports are ready!</div>
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}