{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'core/css/admin_role_management.css' %}">

<div class="role-mgmt-wrapper">
  <h1 class="role-mgmt-title">Organization Roles</h1>

  {% for type in org_types %}
    <section class="org-type-section">
      <h2 class="org-type-heading">{{ type.name }}</h2>

      {% for org in type.organizations.all %}
        <div class="org-card">
          <div class="org-name">{{ org.name }}</div>

          <ul class="role-list">
            {% for r in org.roles.all %}
              <li class="role-chip">
                {{ r.name }}
                <form class="delete-role-form" method="post" action="{% url 'delete_org_role' r.id %}">
                  {% csrf_token %}
                  <button type="submit" class="delete-role-btn">Ã—</button>
                </form>
              </li>
            {% empty %}
              <li class="role-chip role-none">No roles</li>
            {% endfor %}
          </ul>

          <form class="add-role-form" method="post" action="{% url 'add_org_role' %}">
            {% csrf_token %}
            <input type="hidden" name="org_id" value="{{ org.id }}">
            <input type="text" name="name" placeholder="New role" required>
            <button type="submit">Add</button>
          </form>
        </div>
      {% endfor %}
    </section>
  {% empty %}
    <p>No organization types found.</p>
  {% endfor %}
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'core/js/admin_role_management.js' %}"></script>
{% endblock %}
